@use '@styles/typography' as *;
@use '@styles/border' as *;
@use '@styles/colors' as *;
@use '@styles/map' as *;
@use 'sass:map';

.image-upload-section {
  display: flex;
  flex-direction: column;
  margin-right: 3rem; // 48px

  &__grid {
    display: flex;
    flex-wrap: nowrap;
    gap: 1rem;
    overflow-x: scroll;
    padding-top: 0.5rem;
  }

  &__item {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    aspect-ratio: 1;
    scroll-snap-align: start;
    flex: 0 0 12rem; // (~4-5 img)

    @media (max-width: 64em) {
      flex: 0 0 9rem; // (~3-4 img)
    }

    @media (max-width: 30em) {
      flex: 0 0 7rem; // (~2-3 img)
    }
  }

  // 이미지 미리보기
  &__preview {
    width: 100%;
    height: 100%;
  }

  &__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  [class*='ic-'] {
    background-color: map.get($theme-gray, 'light', 'gray-13');
  }

  // 추가 버튼 (ic-upload)
  &__upload-btn {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  // 추가 버튼 (ic-add)
  &__add-btn {
    position: absolute;
    right: -3rem;
    width: 2rem; // 32px
    height: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 0.125rem solid map.get($theme-gray, 'light', 'gray-6');
    transition: all 0.2s ease;

    &:hover {
      background-color: map.get($theme-gray, 'light', 'gray-2');
      border-color: map.get($theme-gray, 'light', 'gray-8');
      box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.15);
    }
  }

  // 삭제 버튼
  &__remove {
    position: absolute;
    top: -0.5rem; // 8px
    right: -0.5rem;
    width: 1.75rem; // 28px
    height: 1.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: map-get($theme-gray, 'light', 'gray-7');
    border: 1px solid map-get($theme-gray, 'light', 'gray-8');
    border-radius: 50%;
    transition: background-color 0.2s ease;

    &:hover {
      background-color: map-get($theme-gray, 'light', 'gray-9');
    }

    @media (max-width: 64em) {
      width: 1.5rem; // 20px
      height: 1.5rem;
    }
  }

  // Image counter
  &__counter {
    margin-left: 0.5rem;
    @include font-scale(12);
    font-weight: 500;
    color: map.get($theme-gray, 'light', 'gray-6');

    @media (max-width: 48em) {
      @include font-scale(11);
    }
  }

  // 용량 초과 에러
  &__warning {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 0.25rem;
    background-color: map.get($theme-red, 'light', 'red-6');
    color: map.get($theme-gray, 'light', 'gray-2');
    text-align: center;
    @include font-scale(10);
    z-index: 10;
  }

  // Hidden file input
  &__input {
    display: none;
  }

  // Dark mode
  [data-theme='dark'] & {
    &__upload-btn {
      background-color: map.get($theme-gray, 'dark', 'gray-8');

      &:hover {
        background-color: map.get($theme-gray, 'dark', 'gray-7');
      }
    }

    &__warning {
      background-color: map.get($theme-red, 'dark', 'red-6');
      color: map.get($theme-gray, 'dark', 'gray-12');
    }
  }
}
